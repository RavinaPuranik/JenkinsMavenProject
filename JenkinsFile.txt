pipeline {
   agent any
   stages {
      stage('Build') {
         steps {
            bat "mvn clean test"
         }
         }
   
   stage('Package') {
   steps{
      // Run the maven package
            bat "mvn package"
   }
   }
      
   stage('Results') {
   steps{
   input("Do you want to capture results")
      junit '**/target/surefire-reports/TEST-*.xml'
      archive 'target/*.jar'
   }
   }

   stage('Email Notification') {
   steps{
        mail body: "${env.JOB_NAME} - Build#${env.BUILD_NUMBER} . ${currentBuild.currentResult}\n\Check console output at ${env.BUILD.URL} to view the results" 
        subject:"${env.JOB_NAME} - Build#${env.BUILD_NUMBER}"
        to:"ravinapuranik1@gmail.com"
   }
   }
}
}
